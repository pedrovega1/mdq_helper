# üîê –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ bcrypt + JWT

## –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å?

### ‚ùå –°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ (API_KEY)
```env
API_KEY=–ø—Ä–æ—Å—Ç–æ–π_–ø–∞—Ä–æ–ª—å_–≤_–æ—Ç–∫—Ä—ã—Ç–æ–º_–≤–∏–¥–µ
```
- –ü–∞—Ä–æ–ª—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
- –¢–æ–∫–µ–Ω –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏—Å—Ç–µ–∫–∞–µ—Ç
- –£—è–∑–≤–∏–º–æ—Å—Ç—å –∫ —É—Ç–µ—á–∫–∞–º .env —Ñ–∞–π–ª–∞

### ‚úÖ –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (bcrypt + JWT)
```env
ADMIN_PASSWORD_HASH=$2b$10$xyz...abc
JWT_SECRET=a1b2c3d4e5f6...
```
- –ü–∞—Ä–æ–ª—å —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ bcrypt —Ö–µ—à (–Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ)
- JWT —Ç–æ–∫–µ–Ω—ã –∏—Å—Ç–µ–∫–∞—é—Ç —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞
- –î–∞–∂–µ –ø—Ä–∏ —É—Ç–µ—á–∫–µ .env –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –ø–∞—Ä–æ–ª—å

---

## üöÄ –ü–æ—à–∞–≥–æ–≤–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

### –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
npm install bcrypt jsonwebtoken
```

### –®–∞–≥ 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ö–µ—à–∞ –∏ —Å–µ–∫—Ä–µ—Ç–∞
```bash
node server/generate-hash.js
```

**–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:**
```
–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ (–º–∏–Ω–∏–º—É–º 8 —Å–∏–º–≤–æ–ª–æ–≤): MySecurePass123

‚è≥ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ö–µ—à–∞ –ø–∞—Ä–æ–ª—è...

‚úÖ –£—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ!

üìã –°–∫–æ–ø–∏—Ä—É–π —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ –≤ —Ñ–∞–π–ª .env:

ADMIN_PASSWORD_HASH=$2b$10$Vb7E8F9G0H1I2J3K4L5M6NzO7P8Q9R0S1T2U3V4W5X6Y7Z8A9B0C1D
JWT_SECRET=f4e3d2c1b0a9f8e7d6c5b4a3f2e1d0c9b8a7f6e5d4c3b2a1f0e9d8c7b6a5f4
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ .env
–ó–∞–º–µ–Ω–∏ –≤ `.env`:
```env
# –£–î–ê–õ–ò —ç—Ç—É —Å—Ç—Ä–æ–∫—É
API_KEY=—Å—Ç–∞—Ä—ã–π_–ø–∞—Ä–æ–ª—å

# –î–û–ë–ê–í–¨ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏ (–∏–∑ –≤—ã–≤–æ–¥–∞ generate-hash.js)
ADMIN_PASSWORD_HASH=$2b$10$Vb7E8F9G0H1I2J3K4L5M6NzO7P8Q9R0S1T2U3V4W5X6Y7Z8A9B0C1D
JWT_SECRET=f4e3d2c1b0a9f8e7d6c5b4a3f2e1d0c9b8a7f6e5d4c3b2a1f0e9d8c7b6a5f4
```

### –®–∞–≥ 4: –ó–∞–º–µ–Ω–∞ —Ñ–∞–π–ª–æ–≤

**–§–∞–π–ª—ã –¥–ª—è –∑–∞–º–µ–Ω—ã:**
- `server/server.js` ‚Üí –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è —Å JWT
- `js/modules/api.js` ‚Üí —É–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤
- `server/generate-hash.js` ‚Üí **–Ω–æ–≤—ã–π —Ñ–∞–π–ª** –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

**–§–∞–π–ª—ã –ë–ï–ó –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
- `js/modules/ui.js` (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- `js/modules/auth.js` (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- `js/script.js` (–≤–æ–∑–º–æ–∂–Ω–æ —Ç—Ä–µ–±—É—é—Ç—Å—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è)
- `css/style.css` (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)
- `index.html` (–±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π)

### –®–∞–≥ 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–π —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
node server/server.js
```

---

## üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
–ï—Å–ª–∏ —É–≤–∏–¥–∏—à—å —Ç–∞–∫–æ–π –≤—ã–≤–æ–¥ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ ‚Äî –≤—Å—ë –æ–∫:
```
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úÖ HTTP Server: –ó–∞–ø—É—â–µ–Ω
üåê –ê–¥—Ä–µ—Å: http://localhost:3000
‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
‚úÖ Telegram Bot: –ó–∞–ø—É—â–µ–Ω
```

–ï—Å–ª–∏ —É–≤–∏–¥–∏—à—å –æ—à–∏–±–∫—É ‚Äî –ø—Ä–æ–≤–µ—Ä—å .env:
```
‚ùå –û–®–ò–ë–ö–ê –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–ò
‚ö†Ô∏è  ADMIN_PASSWORD_HASH –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ .env
‚ö†Ô∏è  JWT_SECRET –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ .env
```

### –¢–µ—Å—Ç 2: –õ–æ–≥–∏–Ω –≤ –ø–∞–Ω–µ–ª—å
1. –û—Ç–∫—Ä–æ–π http://localhost:3000/index.html
2. –í–≤–µ–¥–∏ **–û–†–ò–ì–ò–ù–ê–õ–¨–ù–´–ô –ø–∞—Ä–æ–ª—å** (–Ω–µ —Ö–µ—à!)
3. –ï—Å–ª–∏ –≤—Ö–æ–¥ —É—Å–ø–µ—à–µ–Ω ‚Äî JWT —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ

### –¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
```javascript
// –û—Ç–∫—Ä–æ–π DevTools (F12) ‚Üí Console
localStorage.getItem('admin_token')
// –î–æ–ª–∂–µ–Ω –≤—ã–≤–µ—Å—Ç–∏: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
```

---

## üîç –ß—Ç–æ –¥–µ–ª–∞—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö?

### –û—à–∏–±–∫–∞: "–¢–æ–∫–µ–Ω –∏—Å—Ç—ë–∫"
**–ü—Ä–∏—á–∏–Ω–∞:** JWT —Ç–æ–∫–µ–Ω—ã –∂–∏–≤—É—Ç 24 —á–∞—Å–∞.  
**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–ª–æ–≥–∏–Ω—å—Å—è –≤ –ø–∞–Ω–µ–ª–∏.

### –û—à–∏–±–∫–∞: "–ù–µ–≤–µ—Ä–Ω—ã–π –ø–∞—Ä–æ–ª—å"
**–ü—Ä–∏—á–∏–Ω–∞ 1:** –•–µ—à –≤ .env –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–∞—Ä–æ–ª—é.  
**–†–µ—à–µ–Ω–∏–µ:** –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π `node server/generate-hash.js`

**–ü—Ä–∏—á–∏–Ω–∞ 2:** –í–≤—ë–ª —Ö–µ—à –≤–º–µ—Å—Ç–æ –ø–∞—Ä–æ–ª—è.  
**–†–µ—à–µ–Ω–∏–µ:** –í–≤–æ–¥–∏ –æ–±—ã—á–Ω—ã–π –ø–∞—Ä–æ–ª—å, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–¥–∞–≤–∞–ª –ø—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.

### –û—à–∏–±–∫–∞: "JWT_SECRET –Ω–µ –Ω–∞–π–¥–µ–Ω"
**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ –¥–æ–±–∞–≤–ª–µ–Ω JWT_SECRET –≤ .env  
**–†–µ—à–µ–Ω–∏–µ:** –°–∫–æ–ø–∏—Ä—É–π –∏–∑ –≤—ã–≤–æ–¥–∞ generate-hash.js

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

| –ê—Å–ø–µ–∫—Ç | API_KEY (—Å—Ç–∞—Ä–æ–µ) | bcrypt + JWT (–Ω–æ–≤–æ–µ) |
|--------|------------------|----------------------|
| –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è | –û—Ç–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç ‚ùå | Bcrypt —Ö–µ—à ‚úÖ |
| –ò—Å—Ç–µ—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞ | –ù–∏–∫–æ–≥–¥–∞ ‚ùå | 24 —á–∞—Å–∞ ‚úÖ |
| –í–∑–ª–æ–º –ø—Ä–∏ —É—Ç–µ—á–∫–µ .env | –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π ‚ùå | –ù–µ–≤–æ–∑–º–æ–∂–µ–Ω ‚úÖ |
| Brute-force –∑–∞—â–∏—Ç–∞ | –ù–µ—Ç ‚ùå | Bcrypt –º–µ–¥–ª–µ–Ω–Ω—ã–π ‚úÖ |
| –°—Ç–∞–Ω–¥–∞—Ä—Ç –∏–Ω–¥—É—Å—Ç—Ä–∏–∏ | –ù–µ—Ç ‚ùå | –î–∞ ‚úÖ |

---

## üéØ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å:

### 1. Rate limiting –¥–ª—è –ª–æ–≥–∏–Ω–∞
```javascript
const rateLimit = require('express-rate-limit');

const loginLimiter = rateLimit({
    windowMs: 15 * 60 * 1000,
    max: 5,
    message: '–°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞'
});

app.post('/api/login', loginLimiter, async (req, res) => {
    // ...
});
```

### 2. Refresh —Ç–æ–∫–µ–Ω—ã
–î–æ–±–∞–≤–∏—Ç—å –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–µ refresh —Ç–æ–∫–µ–Ω—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è JWT.

### 3. –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫ –≤—Ö–æ–¥–∞
```javascript
const loginAttempts = [];
// –ó–∞–ø–∏—Å—ã–≤–∞—Ç—å IP, –≤—Ä–µ–º—è, —É—Å–ø–µ—Ö/–Ω–µ—É–¥–∞—á–∞
```

---

## ‚ùì FAQ

**Q: –ù—É–∂–Ω–æ –ª–∏ –º–µ–Ω—è—Ç—å —á—Ç–æ-—Ç–æ –≤ –ë–î?**  
A: –ù–µ—Ç, —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ database.json –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è.

**Q: –ß—Ç–æ –¥–µ–ª–∞—Ç—å —Å–æ —Å—Ç–∞—Ä—ã–º API_KEY?**  
A: –ú–æ–∂–µ—à—å —É–¥–∞–ª–∏—Ç—å –∏–∑ .env –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏.

**Q: –ú–æ–∂–Ω–æ –ª–∏ —Å–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å –ø–æ—Ç–æ–º?**  
A: –î–∞, –ø—Ä–æ—Å—Ç–æ –∑–∞–ø—É—Å—Ç–∏ `node server/generate-hash.js` —Å–Ω–æ–≤–∞.

**Q: –ß—Ç–æ –µ—Å–ª–∏ –∑–∞–±—ã–ª –ø–∞—Ä–æ–ª—å?**  
A: –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π —Ö–µ—à —Å –Ω–æ–≤—ã–º –ø–∞—Ä–æ–ª–µ–º —á–µ—Ä–µ–∑ generate-hash.js.

**Q: JWT —Ç–æ–∫–µ–Ω –≤–∏–¥–µ–Ω –≤ localStorage ‚Äî —ç—Ç–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ?**  
A: –î–∞, –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ –∑–∞—â–∏—Ç—ã –æ—Ç XSS (—É –Ω–∞—Å escapeHtml). –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ ‚Äî httpOnly cookies (—Å–ª–æ–∂–Ω–µ–µ –¥–ª—è SPA).

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫:
1. –ü—Ä–æ–≤–µ—Ä—å –≤—Å–µ —à–∞–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
2. –ü–æ—Å–º–æ—Ç—Ä–∏ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
4. –£–±–µ–¥–∏—Å—å —á—Ç–æ –≤—Å–µ npm –ø–∞–∫–µ—Ç—ã —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã

**–í—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç? –û—Ç–ª–∏—á–Ω–æ! üéâ**

–¢–µ–ø–µ—Ä—å —Ç–≤–æ—è —Å–∏—Å—Ç–µ–º–∞ –∑–∞—â–∏—â–µ–Ω–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.
